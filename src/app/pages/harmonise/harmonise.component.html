<div  class="harmonise-body">

  <div class="vf-section-header">
    <h2 class="vf-section-header__heading section-header">Data Dictionary Harmonisation</h2>
    <p class="vf-section-header__text">Once the data dictionary is uploaded, we will try to harmonise it and find mappings with the standard fields.
      The table below lists data dictionary fields and mapping suggestions. Select a suggestion or suitable field.
      Optionally tag the dictionary fields with available tags. The mappings will improve the discoverability of the cohort.
      Once the mapping is completed, mapping rules can be downloaded in several different standards including GECKO, Maelstrom, OMOP.
    </p>
  </div>

  Download the CSV/spreadsheet template, or try out harmonisation with test data:
  <button class="vf-button vf-button--secondary vf-button--sm">Download CSV template</button>
  <button class="vf-button vf-button--secondary vf-button--sm">Load Test Data</button>

  <br>
  <mat-divider></mat-divider>
  <br>

  <mat-form-field class="field-filter">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="eg. smoking" #input>
  </mat-form-field>

  <button class="vf-button vf-button--primary vf-button--sm button-save">Save</button>
  <button class="vf-button vf-button--primary vf-button--sm button-save">Save and Finish Mapping</button>

  <div>
    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let row"> {{row.name}} </td>
      </ng-container>
      <ng-container matColumnDef="label">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Label </th>
        <td mat-cell *matCellDef="let row"> {{row.label}} </td>
      </ng-container>
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
        <td mat-cell *matCellDef="let row"> {{row.description}} </td>
      </ng-container>
      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Field Type </th>
        <td mat-cell *matCellDef="let row"> {{row.type}}</td>
      </ng-container>
      <ng-container matColumnDef="values">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Field Values</th>
        <td mat-cell *matCellDef="let row"> {{row.values}} </td>
      </ng-container>
      <ng-container matColumnDef="parent">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Parent </th>
        <td mat-cell *matCellDef="let row"> {{row.parent}} </td>
      </ng-container>
      <ng-container matColumnDef="annotations">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Suggestions </th>
        <td mat-cell *matCellDef="let row">
          <mat-form-field appearance="fill">
            <mat-select>
              <mat-option value="option1">{{row.annotations[0]}} </mat-option>
              <mat-option value="option3">{{row.annotations[1]}} </mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="tags">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Tags </th>
        <td mat-cell *matCellDef="let row">
          <mat-form-field class="example-form-field">
            <input matInput type="text" [(ngModel)]="row.tags">
          </mat-form-field>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="9">No data matching the filter "{{input.value}}"</td>
      </tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of dictionary fields"></mat-paginator>
  </div>
</div>
